<div *ngIf="songQueue != null && songQueue.length > 0" [class.invisible]="songQueue == null || songQueue.length <= 0"
     class="player-footer fixed-bottom d-flex justify-content-center align-items-center" style="z-index: 1">
  <div class="container">
    <div class="d-flex justify-content-center align-items-center">
      <div class="plyr-audio-player-controls d-flex justify-content-center align-items-center">
        <fa-icon class="mx-3" [icon]="faStepBackward" (click)="previousAudio()"></fa-icon>
        <fa-icon class="mx-3" [icon]="faPlay" (click)="playAudio()" *ngIf="!isPlaying"></fa-icon>
        <fa-icon class="mx-3" [icon]="faPause" (click)="pauseAudio()" *ngIf="isPlaying"></fa-icon>
        <fa-icon class="mx-3" [icon]="faStepForward" (click)="nextAudio()"></fa-icon>
        <fa-icon class="mx-3" [icon]="faRandom"></fa-icon>
        <img *ngIf="loopType == 0" (click)="loopAudio()" class="no-repeat-control mx-1" title="No-repeat"
             src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZmlsbD0iIzMzMyIgZD0iTTEyIDhIOWE0IDQgMCAxIDAgMCA4aDZhNCA0IDAgMCAwIDIuMTA0LTcuNDAzbDEuNzctMS4xOC4wMi4wMThBNiA2IDAgMCAxIDE1IDE4SDlBNiA2IDAgMSAxIDkgNmgzVjRsNCAzLTQgM1Y4eiIvPjwvc3ZnPgo="/>
        <img *ngIf="loopType == 1" (click)="loopAudio()" class="no-repeat-control mx-1" title="Repeat queue"
             src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZmlsbD0iI2Y1MCIgZD0iTTEyIDhIOWE0IDQgMCAxIDAgMCA4aDZhNCA0IDAgMCAwIDIuMTA0LTcuNDAzbDEuNzctMS4xOC4wMi4wMThBNiA2IDAgMCAxIDE1IDE4SDlBNiA2IDAgMSAxIDkgNmgzVjRsNCAzLTQgM1Y4eiIvPjwvc3ZnPgo="/>
        <img *ngIf="loopType == 2" (click)="loopAudio()" class="no-repeat-control mx-1" title="Repeat current track"
             src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZmlsbD0iI2Y1MCIgZD0iTTExLjAyNyAxNmE0LjU1IDQuNTUgMCAwIDAgLjIzIDJIOUE2IDYgMCAxIDEgOSA2aDNWNGw0IDMtNCAzVjhIOWE0IDQgMCAxIDAgMCA4aDIuMDI3em03LjcyNS0yLjYxYTMuOTk3IDMuOTk3IDAgMCAwLTEuNjQ4LTQuNzkybDEuNzctMS4xOC4wMi4wMTdBNS45ODcgNS45ODcgMCAwIDEgMjEgMTJjMCAxLjMtLjQxMyAyLjUwMy0xLjExNiAzLjQ4NmE0LjQ5NiA0LjQ5NiAwIDAgMC0xLjEzMi0yLjA5NnoiLz48cGF0aCBmaWxsPSIjZjUwIiBkPSJNMTUuNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptLS41LTV2NGgxdi00aC0xem0tMSAwdjFoMXYtMWgtMXoiLz48L3N2Zz4K"/>
      </div>
      <div plyr class="plyr-audio-player" plyrType="audio"
           [plyrSources]="currentAudio"
           (plyrInit)="onInitPlayer($event)"
           (plyrPlay)="onPlayAudio()"
           (plyrPause)="onPauseAudio()"
           (plyrEnded)="onSongEnd()">
      </div>
      <div class="playing-audio d-flex justify-content-start align-items-center">
        <img class="album-photo-playing-audio rounded"
             src="{{'http://localhost:8081/image/' + songQueue[currSongIdx]['albumPhoto']}}">
        <div class="d-flex flex-column ml-2">
          <span class="playing-audio-title">{{songQueue[currSongIdx].title}}</span>
          <span *ngIf="songQueue[currSongIdx]['singers']" class="playing-audio-artist">
          <span *ngFor="let singer of songQueue[currSongIdx]['singers']; last as isLast">
            {{isLast ? singer.name : singer.name + ", "}}
          </span>
        </span>
        </div>
      </div>
      <div class="plyr-audio-player-controls d-flex justify-content-center align-items-center">
        <fa-icon class="mx-2" [icon]="faHeart"></fa-icon>
      </div>
      <div class="plyr-audio-player-controls d-flex justify-content-center align-items-center ml-2 playing-queue"
           (click)="showSongQueue()" [class.show-queue]="isShowSongQueue">
        <svg width="24" height="24">
          <path fill="#333" class="playbackSoundBadge__queueIcon" d="M6 11h12v2H6zM6 7h8v2H6zM6 15h12v2H6zM16 3v6l4-3z"></path>
        </svg>
      </div>
      <div class="song-queue" [class.queue-visible]="isShowSongQueue">
        <div class="queue">
          <div class="queue-panel px-4 py-1">
            <div class="queue-title" (click)="showSongQueue()">
              Next up
            </div>
            <button type="button" class="queue-clear-all mr-4" (click)="removeAllSongInQueue()">Clear</button>
            <button type="button" class="queue-close" (click)="showSongQueue()">
              <fa-icon [icon]="faChevronDown"></fa-icon>
            </button>
          </div>
          <div class="queue-scroll">
            <ng-container *ngIf="songQueue != null && songQueue.length > 0">
              <div *ngFor="let song of songQueue; index as idx" class="queue-item"
                   [class.playing-piece]="idx === currSongIdx" [class.played-piece]="idx < currSongIdx">
                <div class="queue-item-view">
                  <div class="queue-item-artwork">
                    <span
                      style="{{'background-image: url(http://localhost:8081/image/' + song['albumPhoto'] + ');'}}"></span>

                    <fa-icon [icon]="faPlay" class="item-view-button item-view-btn-play"
                             (click)="playFromQueue(idx)"
                             [style.visibility]="(!isPlaying && idx === currSongIdx) ? 'visible' : ((isPlaying && idx === currSongIdx) ? 'hidden' : '')">
                    </fa-icon>
                    <fa-icon [icon]="faPause" class="item-view-button"
                             (click)="pauseFromQueue()"
                             [class.item-view-btn-pause]="isPlaying">
                    </fa-icon>
                  </div>
                  <div class="queue-item-details">
                    <div class="queue-item-title">
                      <a href="#">{{song.title}}</a>
                    </div>
                    <div class="queue-item-artist">
                      <ng-container *ngIf="song['singers']">
                        <a *ngFor="let singer of song['singers']; last as isLast" href="#">
                          {{isLast ? singer.name : singer.name + ", "}}
                        </a>
                      </ng-container>
                    </div>
                  </div>
                  <div class="queue-item-duration" [class.d-none]="idx === currSongIdx">
                    12:01
                  </div>
                  <div class="queue-item-actions" [class.d-block]="idx === currSongIdx">
                    <fa-icon class="mx-2" [icon]="faHeart"></fa-icon>
                    <fa-icon class="mx-2" [icon]="faEllipsis"></fa-icon>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
